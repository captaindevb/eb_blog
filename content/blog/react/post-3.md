---
title: 'useMemo'
date: 2021-02-09 12:26:00
category: 'react'
draft: false
---

## 1. memoization

useMemo를 사용하기 전에 꼭 짚고 넘어가야 할 개념이다. useMemo는 메모제이션된 값을 반환하기때문인데, 이 메모제이션이란 간단히 값을 저장해두었다가 다시 꺼내쓰는 기법이다.
기존에 수행한 연산의 결과값을 어딘가에 저장해두고, 동일한 입력이 들어오면 재활용하는 프로그래밍 기법이다.

이러한 메모제이션 기법을 적절히 적용하면 중복 연산을 피할 수 있기 때문에 메모리를 조금 더 쓰더라도 애플리케이션의 성능을 최적화 할 수 있다.

## 2. useMemo

메모제이션된 값을 반환하는 리액트 Hooks 중 하나이다. 연산된 값을 재사용 하기 유용한 Hooks라고 할 수 있다.

아래 코드 예시를 보자.

```js{3}
function test({ x, y }) {
  const result = add(x, y)
  return <div>{result}</div>
}
```

위 함수는 간단하게 x,y 값을 받아 add라는 함수로 계산 후 컴포넌트로 리턴하는 함수이다. 현재는 test 함수가 간단하지만, 만약 이 함수가 복잡한 계산으로 인해 수 초 이상 걸리는 함수가 된다면 UI는 랜더링 할때마다 계산을 하게되므로 약간의 지연이 발생할 수 있다. 그렇다면 위와같은 함수를 useMemo에 적용하면 어떨까.

```js{3}
function test({ x, y }) {
  const result = useMemo(() => add(x, y), [x, y])
  return <div>{result}</div>
}
```

위와 같이 코드를 수정하면 랜더링이 발생했을 때, 이전 랜더링과 현재 랜더링을 비교하여 x와 y값이 동일한 경우 메모리에 저장해두었던 result 값을 재사용 하게 된다. 즉 함수 재호출과정을 생략할 수 있다. (두번째 파라미터가 기존 결과값의 재활용 여부 기준이 되는 값)

이렇듯 useMemo hooks는 메모제이션 기법을 간단하게 구현 가능하도록 해준다. 단, useMemo가 적용된 값은 재활용을 위해 가비지 컬렉션에서 제외되기 때문에 메모리를 더 쓰게 되므로 이 점은 주의하여 꼭 필요한 곳에서만 활용하도록 해야한다.
<br/><br/><br/>
